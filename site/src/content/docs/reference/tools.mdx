---
title: Tool Catalog
description: Complete reference for all 27 reklawdbox MCP tools with parameters and behavior.
sidebar:
  order: 1
---

import { Aside, Badge } from '@astrojs/starlight/components';

reklawdbox exposes 27 MCP tools grouped into seven categories. Each tool accepts a JSON object of parameters and returns structured JSON. All tools are read-only against the Rekordbox database — write operations go through XML export or direct file tag writes.

## Library tools

Tools for reading your Rekordbox collection.

### `read_library` <Badge text="no params" variant="note" />

Get a library summary: track count, genre distribution, BPM range, key distribution, and rating breakdown.

No parameters.

### `search_tracks`

Search and filter tracks in the Rekordbox library. All parameters are optional — combine any set of filters.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `query` | string | no | Free-text search matching title or artist |
| `artist` | string | no | Filter by artist (partial match) |
| `genre` | string | no | Filter by genre (partial match) |
| `rating_min` | integer | no | Minimum star rating (1-5) |
| `bpm_min` | number | no | Minimum BPM |
| `bpm_max` | number | no | Maximum BPM |
| `key` | string | no | Filter by musical key (e.g., "Am", "Cm") |
| `has_genre` | boolean | no | Filter by whether track has a genre set |
| `label` | string | no | Filter by label (partial match) |
| `path` | string | no | Filter by file path/folder (partial match) |
| `added_after` | string | no | ISO date, tracks added on or after |
| `added_before` | string | no | ISO date, tracks added on or before |
| `playlist` | string | no | Filter by playlist ID |
| `include_samples` | boolean | no | Include Rekordbox factory samples (default: false) |
| `limit` | integer | no | Max results (default: 50, max: 200) |
| `offset` | integer | no | Skip first N results for pagination |

Factory sample tracks are excluded by default. Set `include_samples: true` to see them.

### `get_track`

Get full details for a specific track by ID. Returns all Rekordbox metadata fields plus any cached enrichment and audio analysis data.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_id` | string | yes | Track ID |

### `get_playlists` <Badge text="no params" variant="note" />

List all playlists with track counts. Returns the full playlist tree including folders and smart playlists.

No parameters.

### `get_playlist_tracks`

List tracks in a specific playlist, in playlist order.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `playlist_id` | string | yes | Playlist ID |
| `limit` | integer | no | Max results (default: 200) |

---

## Metadata tools

Tools for staging, previewing, and exporting metadata changes. reklawdbox never writes to the Rekordbox database directly — changes are staged in memory and exported as Rekordbox-compatible XML.

### `get_genre_taxonomy` <Badge text="no params" variant="note" />

Get the configured genre taxonomy. Returns the canonical genre list and alias mappings used for normalization suggestions.

No parameters.

### `update_tracks`

Stage changes to track metadata. Changes are held in memory until exported with `write_xml` or cleared with `clear_changes`.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `changes` | array | yes | Array of track change objects |

Each change object:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `track_id` | string | yes | Track ID |
| `genre` | string | no | New genre |
| `comments` | string | no | New comments |
| `rating` | integer | no | New star rating (1-5) |
| `color` | string | no | New color name |

You can stage changes for multiple tracks in one call. Calling `update_tracks` again for the same track merges fields — only the specified fields are overwritten.

### `preview_changes`

Preview all staged changes, showing a diff from the current Rekordbox state.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_ids` | string[] | no | Filter to specific track IDs (empty = show all staged changes) |

### `write_xml`

Write staged changes to a Rekordbox-compatible XML file. Optionally include playlist definitions.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `output_path` | string | no | Output path (default: `./rekordbox-exports/reklawdbox-{timestamp}.xml`) |
| `playlists` | array | no | Optional playlist exports |

Each playlist object:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | yes | Playlist name |
| `track_ids` | string[] | yes | Track IDs in playlist order |

Returns JSON on both the write and no-change paths. When there are no staged changes, the response includes `"message": "No changes to write."` and no file is created.

### `clear_changes`

Clear staged changes, either entirely or selectively by track or field.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_ids` | string[] | no | Track IDs to clear (empty = clear all) |
| `fields` | string[] | no | Specific fields to unstage: `"genre"`, `"comments"`, `"rating"`, `"color"` (empty = all fields) |

### `suggest_normalizations`

Analyze genres in your library and suggest normalizations to the canonical taxonomy.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `min_count` | integer | no | Only include genres with at least this many tracks (default: 1) |

Returns three sections:

- **`alias`** — known mappings from your genre strings to canonical genres
- **`unknown`** — genres that don't match any alias or canonical entry
- **`canonical`** — genres that already match the taxonomy exactly

---

## Enrichment tools

Tools for looking up external metadata from Discogs and Beatport. Results are cached in the internal SQLite database.

### `lookup_discogs`

Look up a track on Discogs for genre, style, label, year, and catalog number enrichment.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_id` | string | no | Track ID (auto-fills artist/title/album from library) |
| `artist` | string | no | Artist name (required if no `track_id`) |
| `title` | string | no | Track title (required if no `track_id`) |
| `album` | string | no | Album/release title for better matching |
| `force_refresh` | boolean | no | Bypass cache (default: false) |

<Aside type="note">
  If Discogs authentication is missing, the response includes an `auth_url`. Open it in a browser, approve access, then call `lookup_discogs` again. The session persists across server restarts.
</Aside>

### `lookup_beatport`

Look up a track on Beatport for genre, BPM, and key enrichment.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_id` | string | no | Track ID (auto-fills artist/title from library) |
| `artist` | string | no | Artist name (required if no `track_id`) |
| `title` | string | no | Track title (required if no `track_id`) |
| `force_refresh` | boolean | no | Bypass cache (default: false) |

### `enrich_tracks`

Batch enrich tracks via Discogs and/or Beatport. Accepts the same search filter parameters as `search_tracks` to scope which tracks to enrich, plus the parameters below.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_ids` | string[] | no | Specific track IDs (highest priority selector) |
| `playlist_id` | string | no | Enrich tracks in this playlist |
| `max_tracks` | integer | no | Max tracks to enrich (default: 50) |
| `providers` | string[] | no | Providers to query: `"discogs"`, `"beatport"` (default: `["discogs"]`) |
| `skip_cached` | boolean | no | Skip already-cached tracks (default: true) |
| `force_refresh` | boolean | no | Bypass cache entirely (default: false) |

When `skip_cached` is true (the default), tracks that already have cached results from the requested providers are skipped. Set `force_refresh: true` to re-fetch from the provider and overwrite cached data.

---

## Audio analysis tools

Tools for analyzing audio files with stratum-dsp (always available) and Essentia (optional). Results are cached per track per backend.

### `analyze_track_audio`

Analyze one track with stratum-dsp and optional Essentia. Returns BPM, key, and (with Essentia) energy descriptors like danceability, spectral centroid, loudness, onset rate, and dynamic complexity.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_id` | string | yes | Track ID |
| `skip_cached` | boolean | no | Skip if already cached (default: true) |

Set `skip_cached: false` to force a fresh analysis, overwriting cached results.

### `analyze_audio_batch`

Batch audio analysis. Accepts the same search filter parameters as `search_tracks` to scope which tracks to analyze, plus the parameters below.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_ids` | string[] | no | Specific track IDs (highest priority selector) |
| `playlist_id` | string | no | Analyze tracks in this playlist |
| `max_tracks` | integer | no | Max tracks to analyze (default: 20) |
| `skip_cached` | boolean | no | Skip already-cached tracks (default: true) |

### `setup_essentia` <Badge text="no params" variant="note" />

Install or validate Essentia in a local Python venv and activate it for the running server. If Essentia is already available, reports the current status. If not, creates a venv and installs the package. Activation takes effect immediately without a server restart.

No parameters.

---

## Set building tools

Tools for scoring transitions and generating DJ set orderings.

### `score_transition`

Score a single transition between two tracks across six axes, plus a weighted composite.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `from_track_id` | string | yes | Source track ID |
| `to_track_id` | string | yes | Destination track ID |
| `energy_phase` | string | no | Energy phase: `"warmup"`, `"build"`, `"peak"`, `"release"` |
| `priority` | string | no | Weight axis: `"balanced"`, `"harmonic"`, `"energy"`, `"genre"` |

Returns scores on six axes: **key**, **BPM**, **energy**, **genre**, **brightness**, **rhythm**, plus a **composite** score. Each axis is 0.0-1.0, where 1.0 is a perfect match.

### `build_set`

Generate candidate set orderings from a track pool using greedy optimization with energy-curve shaping.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_ids` | string[] | yes | Pool of candidate track IDs |
| `target_tracks` | integer | yes | Desired number of tracks per candidate set |
| `priority` | string | no | Weight axis (default: `"balanced"`) |
| `energy_curve` | string or array | no | Preset name or custom phase array (default: `"warmup_build_peak_release"`) |
| `start_track_id` | string | no | Force a specific opening track |
| `candidates` | integer | no | Number of candidate sets to generate (default: 2, max: 3) |

Built-in energy curve presets: `"warmup_build_peak_release"`, `"flat"`, `"peak_only"`. Alternatively, pass a custom array of phase strings (e.g., `["warmup", "build", "build", "peak", "peak", "release"]`).

Returns 2-3 candidate sequences, each with per-transition scores, an overall set score, and estimated total duration.

---

## Data resolution tools

Tools for reading cached and staged data without making external calls.

### `resolve_track_data`

Return all cached enrichment data, audio analysis results, and staged changes for one track. Does not make any external API calls or run analysis — returns only what is already available locally.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_id` | string | yes | Track ID |

### `resolve_tracks_data`

Batched version of `resolve_track_data`. Accepts the same search filter parameters as `search_tracks` to scope which tracks to resolve, plus the parameters below.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_ids` | string[] | no | Specific track IDs |
| `playlist_id` | string | no | Resolve tracks in this playlist |
| `max_tracks` | integer | no | Max tracks to return (default: 50) |

### `cache_coverage`

Report enrichment and audio cache completeness for a track scope. Accepts the same search filter parameters as `search_tracks` to scope which tracks to check, plus the parameters below.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `track_ids` | string[] | no | Specific track IDs |
| `playlist_id` | string | no | Check tracks in this playlist |
| `max_tracks` | integer | no | Max tracks to check (default: 200) |

Returns: total tracks in scope, per-provider cached counts and percentages, and gap counts (tracks missing audio analysis, missing enrichment, or missing all data).

---

## File tag tools

Tools for reading and writing native metadata tags (ID3v2, Vorbis Comment, RIFF INFO, MP4/iTunes) directly on audio files. These operate on files, not the Rekordbox database.

### `read_file_tags`

Read metadata tags from audio files. Supports FLAC, MP3, WAV, M4A, AAC, and AIFF.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `paths` | string[] | no | Explicit file paths |
| `track_ids` | string[] | no | Resolve paths from Rekordbox track IDs |
| `directory` | string | no | Scan a directory for audio files |
| `glob` | string | no | Glob filter within directory (default: all audio files) |
| `recursive` | boolean | no | Scan subdirectories (default: false) |
| `fields` | string[] | no | Return only these tag fields (default: all) |
| `include_cover_art` | boolean | no | Include cover art metadata (default: false) |
| `limit` | integer | no | Max files to read (default: 200, max: 2000) |

Provide at least one of `paths`, `track_ids`, or `directory` to specify which files to read.

### `write_file_tags`

Write or delete metadata tags on audio files. Supports the same formats as `read_file_tags`.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `writes` | array | yes | Array of write operations |
| `dry_run` | boolean | no | Preview changes without writing (default: false) |

Each write entry:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `path` | string | yes | Path to audio file |
| `tags` | object | yes | Field names mapped to string values, or `null` to delete a tag |
| `wav_targets` | string[] | no | WAV only: tag layers to write (default: both `"id3v2"` and `"riff_info"`) |

<Aside type="caution">
  Rekordbox reads only RIFF INFO (tag 3) from WAV files. Always write both layers (the default) to ensure compatibility.
</Aside>

### `extract_cover_art`

Extract embedded cover art from an audio file and save it to disk.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `path` | string | yes | Path to audio file |
| `output_path` | string | no | Save location (default: `cover.{ext}` in same directory) |
| `picture_type` | string | no | Which art to extract (default: `"front_cover"`) |

### `embed_cover_art`

Embed cover art into one or more audio files.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `image_path` | string | yes | Path to image file (JPEG or PNG) |
| `targets` | string[] | yes | Audio files to embed art into |
| `picture_type` | string | no | Picture type (default: `"front_cover"`) |

---

## Collection audit tools

### `audit_state`

Manage collection audits: scan directories for convention violations, query detected issues, resolve them, and generate summaries. This tool uses a tagged union — the `operation` field determines which action to perform.

#### Operation: `scan`

Scan a directory for convention violations (missing genres, inconsistent tags, naming issues).

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `operation` | string | yes | `"scan"` |
| `scope` | string | yes | Directory path to audit |
| `revalidate` | boolean | no | Re-read all files including unchanged ones (default: false) |
| `skip_issue_types` | string[] | no | Issue types to exclude (e.g., `["GENRE_SET"]`) |

#### Operation: `query_issues`

Query detected issues from a previous scan.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `operation` | string | yes | `"query_issues"` |
| `scope` | string | yes | Directory path prefix to filter |
| `status` | string | no | Filter by status: `"open"`, `"resolved"`, `"accepted"`, `"deferred"` |
| `issue_type` | string | no | Filter by issue type |
| `limit` | integer | no | Max results (default: 100) |
| `offset` | integer | no | Pagination offset (default: 0) |

#### Operation: `resolve_issues`

Mark issues as resolved with a resolution type.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `operation` | string | yes | `"resolve_issues"` |
| `issue_ids` | integer[] | yes | Issue IDs to resolve |
| `resolution` | string | yes | Resolution type: `"accepted_as_is"`, `"wont_fix"`, `"deferred"` |
| `note` | string | no | Optional comment explaining the resolution |

#### Operation: `get_summary`

Get an audit summary for a directory scope, including issue counts by type and status.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `operation` | string | yes | `"get_summary"` |
| `scope` | string | yes | Directory path prefix |

---

<Aside type="tip">
  The search filter parameters (`query`, `artist`, `genre`, `rating_min`, `bpm_min`, `bpm_max`, `key`, `has_genre`, `label`, `path`, `added_after`, `added_before`) are shared across `search_tracks`, `enrich_tracks`, `analyze_audio_batch`, `resolve_tracks_data`, and `cache_coverage`. Any combination can be used to scope operations.
</Aside>
